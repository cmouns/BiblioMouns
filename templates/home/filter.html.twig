{% extends 'base.html.twig' %}

{% block title %}Livres{% endblock %}

{% block body %}
<div class="container">
  <h1>{{ subCategory.getName() }}</h1>
  <div class="row">
    {% for book in books %}
      {% set subCategory = book.getSubCategory().first() %}
      {% if subCategory %}
        <div class="col-md-3 mb-4 d-flex">
          <div class="card h-100 w-100 d-flex flex-column">
             <div class="card-img-top ratio ratio-4x3 bg-light rounded-top" style="overflow: hidden;">
               <img 
                src="{{ asset('uploads/images/' ~ book.getImage()) }}" 
                alt="{{ book.getName() }}" 
                class="img-fluid h-100 w-100"
                style="object-fit: contain; background: #f8f9fa;">
            </div>
             
            <div class="card-body d-flex flex-column">
              <a href="{{ path('app_home_book_filter', {'id': book.id, 'slug': book.slug}) }}">
                <h5 class="card-title titleProduct" style="min-height:2.4em">{{ book.getName() }}</h5>
              </a>
              <h3>{{ book.getPrice() }}€</h3>

              <a href="{{ path('app_add_book_favorite', {id: book.id}) }}">❤️ Ajouter en favoris</a>

            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endblock %}